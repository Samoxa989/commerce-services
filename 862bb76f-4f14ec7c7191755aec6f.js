"use strict";(self.webpackChunkcommerce_services=self.webpackChunkcommerce_services||[]).push([[6760],{7256:function(e,s,a){a.d(s,{q:function(){return H}});var l=a(54506),o=a(88763),n=a(40595),r=a(32485),t=a.n(r),i=a(71710),c=a.n(i),d=a(47009),p=a.n(d),u=a(4213),m=a(71052),g=a(35413),v=a(2047),f=a(25013),w=a(53581),y=a(46256),h=a(20719),b=a(3322),x=a(3823),C=a(86868);var k={name:"1a50hjl",styles:"border:none;padding:0;font-family:'adobe-clean';background:transparent;color:var(--spectrum-global-color-gray-800);text-decoration:underline;cursor:pointer;&:hover{color:var(--spectrum-global-color-gray-900);}"},Y={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},N={name:"wwrf8h",styles:"display:flex;flex-direction:column;gap:8px;width:80%"},D={name:"1swkvfk",styles:"padding:0;font-family:'adobe-clean';border:none;background:transparent;margin-left:10px;cursor:pointer;text-decoration:underline;color:rgb(0, 84, 182);&:hover{color:rgb(2, 101, 220);}"},S={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},z={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},A={name:"ti75j2",styles:"margin:0"},j={name:"a29rn1",styles:"display:flex;text-align:center;align-items:center;gap:10px"},P={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},L={name:"1xg43bt",styles:"display:flex;gap:20px;align-items:baseline"},B={name:"6apepd",styles:"display:flex;flex-direction:column;gap:48px"};const H=e=>{var s,a;let{formData:r,response:i,handleRestart:d}=e;const{getCredentialData:M,selectedOrganization:I}=(0,o.useContext)(x.A),$=M,{0:R,1:T}=(0,o.useState)(),{0:E,1:F}=(0,o.useState)(""),O={},U={label:"products",productList:[]};null==$||null===(s=$[H])||void 0===s||s.children.forEach((e=>{let{type:s,props:a}=e;var o,n;(O[s]=a,a.children&&s===h.s)&&(O[s]=a,null==a||null===(o=a.children)||void 0===o||o.forEach((e=>{let{type:s,props:a}=e;O[s]=a})));s===v.tZ&&null!=a&&a.children&&(n=U.productList).push.apply(n,(0,l.A)([].concat(a.children).map((e=>{let{props:{label:s,icon:a}}=e;return{label:s,icon:a}}))))}));const _=null==U?void 0:U.productList;(0,o.useEffect)((()=>{r.Downloads&&q(`/console/api/organizations/${null==I?void 0:I.id}/projects/${i.projectId}/workspaces/${i.workspaceId}/download`,r.Download,r.zipUrl)}),[]);const Z=null==$?void 0:$[H],q=async function(e,s,a){void 0===s&&(s="download"),T(!0);try{var l,o,n,r,t;const i=await p().getBinaryContent(a),d=new Uint8Array(i).buffer,m=new(c());await m.loadAsync(d);const g={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(null===(l=window.adobeIMS)||void 0===l||null===(o=l.getTokenFromStorage())||void 0===o?void 0:o.token),"x-api-key":null===(n=window)||void 0===n||null===(r=n.adobeIMS)||void 0===r||null===(t=r.adobeIdData)||void 0===t?void 0:t.client_id}},v=await fetch(e,g);if(200===v.status){const e=await v.json();m.file("credential.json",JSON.stringify(e));const a=await m.generateAsync({type:"blob"});(0,u.saveAs)(a,`${s}.zip`)}else console.error("Failed to fetch additional data. Response status:",v.status)}catch(i){console.error("An error occurred:",i)}finally{T(!1)}};return(0,n.Y)("div",{className:t()(null==Z?void 0:Z.className),css:B},(0,n.Y)("div",{className:t()(null==Z?void 0:Z.className),css:(0,n.AH)("display:flex;flex-direction:column;gap:16px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width: ",m.jd,") and (max-width: ",m.cp,"){padding:0;width:100%;}","")},(0,n.Y)("div",{css:L},(null==Z?void 0:Z.title)&&(0,n.Y)("h2",{className:"spectrum-Heading spectrum-Heading--sizeL",css:P},null==Z?void 0:Z.title),R&&(0,n.Y)("div",{css:j},(0,n.Y)("div",{className:"spectrum-ProgressCircle spectrum-ProgressCircle--indeterminate spectrum-ProgressCircle--small"},(0,n.Y)("div",{className:"spectrum-ProgressCircle-track"}),(0,n.Y)("div",{className:"spectrum-ProgressCircle-fills"},(0,n.Y)("div",{className:"spectrum-ProgressCircle-fillMask1"},(0,n.Y)("div",{className:"spectrum-ProgressCircle-fillSubMask1"},(0,n.Y)("div",{className:"spectrum-ProgressCircle-fill"}))),(0,n.Y)("div",{className:"spectrum-ProgressCircle-fillMask2"},(0,n.Y)("div",{className:"spectrum-ProgressCircle-fillSubMask2"},(0,n.Y)("div",{className:"spectrum-ProgressCircle-fill"}))))),(0,n.Y)("p",{css:A},"Downloading..."))),r.Downloads&&(null==Z?void 0:Z.paragraph)&&(0,n.Y)("p",{className:"spectrum-Body spectrum-Body--sizeL",css:z},null==Z?void 0:Z.paragraph),r.Downloads&&(0,n.Y)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:S},"Download not working?",(0,n.Y)("button",{css:D,onClick:()=>q(`/console/api/organizations/${null==I?void 0:I.id}/projects/${i.projectId}/workspaces/${i.workspaceId}/download`,r.Download,r.zipUrl),"data-cy":"restart-download"},"Restart download"))),(0,n.Y)("div",{css:(0,n.AH)("display:flex;gap:35px;@media screen and (min-width: ",m.jd,") and (max-width: ",m.cp,"){flex-direction:column;padding-left:0;}","")},(0,n.Y)("div",{css:(0,n.AH)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width: ",m.jd,") and (max-width: ",m.cp,"){width:100%;}","")},(0,n.Y)(C.g,{credentialName:r.CredentialName,productList:_,ProductComponent:v.tZ,AccessTokenComponent:w.m,DevConsoleLinkComponent:y.x,ClientDetailsComponent:h.s,allowedOriginsDetails:r.AllowedOrigins,organizationName:I,response:i,nextButtonLink:null==Z?void 0:Z.nextStepsHref,nextButtonLabel:null==Z?void 0:Z.nextStepsLabel,devConsoleLink:null==Z?void 0:Z.devConsoleDirection,developerConsoleManage:null==Z?void 0:Z.developerConsoleManage,myCredentialFields:O}),(0,n.Y)("div",{css:N},(0,n.Y)("h4",{className:"spectrum-Heading spectrum-Heading--sizeXS",css:Y},"Need another credential"),(0,n.Y)("p",{className:"spectrum-Body spectrum-Body--sizeS"},(0,n.Y)("button",{onClick:d,css:k,"data-cy":"Restart-new-credential"},"Restart and create a new credential")))),null!=Z&&Z.children?(0,n.Y)(b.T,{sideContent:null===(a=O[f.D])||void 0===a?void 0:a.children,SideComp:f.D}):null),E&&(0,n.Y)(g.y,{variant:"success",message:"Copied to clipboard",disable:1e3,customDisableFunction:F}))}}}]);
//# sourceMappingURL=862bb76f-4f14ec7c7191755aec6f.js.map